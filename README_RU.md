üìò [English version](README.md)

# –¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∞–ª—é—Ç–Ω—ã—Ö –∫—É—Ä—Å–æ–≤

> **–ö–æ—Ä–æ—Ç–∫–æ:** –ù–µ–±–æ–ª—å—à–æ–π Telegram-–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑—ã –≤–∞–ª—é—Ç–Ω—ã—Ö –∫—É—Ä—Å–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–æ—Å—Ç–æ–µ –∞–Ω—Å–∞–º–±–ª–µ–≤–æ–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ –º–∞—Ä–∫–æ–≤—Å–∫–∏—Ö —Ü–µ–ø–µ–π (–ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è) –∏ –ª–∞–≥–æ–≤–æ–π –ª–∏–Ω–µ–π–Ω–æ–π —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ (–ø—Ä–æ–≥–Ω–æ–∑ –≤–µ–ª–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è). –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –±–æ—Ç–∞, –ø–∞—Ä—Å–µ—Ä –¥–∞–Ω–Ω—ã—Ö, –æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –∏ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤.

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

* [–û–±–∑–æ—Ä](#overview)
* [–ò–¥–µ—è –∏ –∞–ª–≥–æ—Ä–∏—Ç–º—ã (–ø–æ–¥—Ä–æ–±–Ω–æ)](#concept-and-algorithms-detailed)

  * [–ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –ø—Ä–∏–∑–Ω–∞–∫–∏](#preprocessing-and-features)
  * [–ú–∞—Ä–∫–æ–≤—Å–∫–∏–µ —Ü–µ–ø–∏ ‚Äî –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ](#markov-chains---construction-and-smoothing)
  * [–õ–∞–ø–ª–∞—Å–æ–≤–æ (add-k) —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ ‚Äî –≥–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ](#laplace-add-k-smoothing---deep-dive)
  * [–õ–∞–≥–æ–≤–∞—è –ª–∏–Ω–µ–π–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è ‚Äî –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∏ —á–∏—Å–ª–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã](#lagged-linear-regression---maths-and-numerics)
  * [–ü—Ä–∞–≤–∏–ª–∞ –∞–Ω—Å–∞–º–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∏—á—å–∏—Ö](#ensembling-rules-and-tie-breaking)
* [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#project-structure)
* [–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π)](#data-format-expanded)
* [–õ–æ–∫–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#local-setup-and-run)
* [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ)](#configuration-and-parameters-explained)
* [–û–±—É—á–µ–Ω–∏–µ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ (–∑–∞–º–µ—Ç–∫–∏ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)](#training-and-forecasting-implementation-notes)
* [–î–µ—Ç–∞–ª–∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤](#plotting-and-visualization-details)
* [–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å –ø–∞—Ä—Å–µ—Ä–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö](#parser-and-data-fetching-robustness)
* [–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ)](#interpretation-and-limitations-technical)
* [–ò–¥–µ–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏–π / TODO (–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –¥–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞)](#ideas-for-improvements--todo-practical-roadmap)
* [–õ–∏—Ü–µ–Ω–∑–∏—è](#license)

---

## –û–±–∑–æ—Ä

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π:

* –∑–∞–≥—Ä—É–∂–∞–µ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç (–∏—Å—Ç–æ—á–Ω–∏–∫: JSON API –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ –±–∞–Ω–∫–∞ –†–æ—Å—Å–∏–∏),
* —Å—Ç—Ä–æ–∏—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ü–µ–Ω –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –ø–∞—Ä, —Ç–∞–∫–∏—Ö –∫–∞–∫ `USD_per_EUR`, `EUR_per_RUB` –∏ —Ç.–¥.,
* –≤—ã—á–∏—Å–ª—è–µ—Ç –¥–Ω–µ–≤–Ω—ã–µ –ø—Ä–∏—Ä–∞—â–µ–Ω–∏—è –∏ –∏—Ö –∑–Ω–∞–∫–∏ (–≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑),
* –æ–±—É—á–∞–µ—Ç –Ω–µ–±–æ–ª—å—à–∏–µ –º–∞—Ä–∫–æ–≤—Å–∫–∏–µ –º–æ–¥–µ–ª–∏ –Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è—Ö –∑–Ω–∞–∫–æ–≤ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ *–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è*,
* –æ–±—É—á–∞–µ—Ç –ø—Ä–æ—Å—Ç—ã–µ –ª–∞–≥–æ–≤—ã–µ –ª–∏–Ω–µ–π–Ω—ã–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ –Ω–∞ –ø—Ä–∏—Ä–∞—â–µ–Ω–∏—è—Ö –¥–ª—è –æ—Ü–µ–Ω–∫–∏ *–≤–µ–ª–∏—á–∏–Ω—ã* —Å–ª–µ–¥—É—é—â–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è,
* –∫–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç –≤—ã–≤–æ–¥—ã –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–æ–¥–µ–ª–µ–π –≤ –∞–Ω—Å–∞–º–±–ª–µ–≤—ã–π –ø—Ä–æ–≥–Ω–æ–∑ –∏ —Å—Ç—Ä–æ–∏—Ç –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫ –Ω–∞ N –¥–Ω–µ–π –≤–ø–µ—Ä—ë–¥,
* –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Telegram-–±–æ—Ç–∞ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–≥–Ω–æ–∑–æ–≤.

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Ä–∞—Å—à–∏—Ä—è–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π README, –¥–æ–±–∞–≤–ª—è—è –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–∏—Ö –≤—ã–±–æ—Ä–æ–≤ (–≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è), —á–∏—Å–ª–µ–Ω–Ω—ã—Ö –æ–≥–æ–≤–æ—Ä–æ–∫ –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

---

## –ò–¥–µ—è –∏ –∞–ª–≥–æ—Ä–∏—Ç–º—ã (–ø–æ–¥—Ä–æ–±–Ω–æ)

### –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –ø—Ä–∏–∑–Ω–∞–∫–∏

–í—Ö–æ–¥: —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–∞—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–µ—Ä–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö —Ü–µ–Ω `Price(t)`.

–í—ã—á–∏—Å–ª—è–µ–º:

1. `diff(t) = Price(t) - Price(t-1)` ‚Äî —Å—ã—Ä–æ–π –¥–Ω–µ–≤–Ω–æ–π –ø—Ä–∏—Ä–æ—Å—Ç (–∑–Ω–∞–∫–æ–≤—ã–π float). –ï—Å–ª–∏ –≤—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `pct_change(t) = Price(t)/Price(t-1) - 1`.
2. `sign(t) = '+' if diff(t) >= 0 else '-'` ‚Äî –¥–∏—Å–∫—Ä–µ—Ç–Ω–∞—è –º–µ—Ç–∫–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

–ü—Ä–∏–º–µ—á–∞–Ω–∏—è –∏ –∫—Ä–∞–π–Ω–∏–µ —Å–ª—É—á–∞–∏:

* –ï—Å–ª–∏ –≤ CSV –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–µ –¥–Ω–∏, –∫–æ–¥ –≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ —Å–æ—Å–µ–¥–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —Ç–æ—Ä–≥–æ–≤—ã–µ —Ç–æ—á–∫–∏. –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —è–≤–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–µ –¥–Ω–∏, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–∞—Ç—ã `NaN` –∏–ª–∏ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –∏–∑–≤–µ—Å—Ç–Ω—É—é —Ü–µ–Ω—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–º–µ—Ä–µ–Ω–∏—è.
* –ù—É–ª–µ–≤—ã–µ –ø—Ä–∏—Ä–∞—â–µ–Ω–∏—è –≤ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞—é—Ç `+`; —ç—Ç–æ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∏—á—å–∏ ‚Äî –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –Ω—É–ª–∏ –≤ –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä `0`), –µ—Å–ª–∏ –ø–æ–∑–∂–µ –∑–∞—Ö–æ—Ç–∏—Ç–µ –æ–±—É—á–∞—Ç—å 3‚Äë—Å–æ—Å—Ç–æ—è–Ω–∏–µ–≤—É—é –º–∞—Ä–∫–æ–≤—Å–∫—É—é –º–æ–¥–µ–ª—å.
* –û—á–µ–Ω—å –Ω–µ–±–æ–ª—å—à–∏–µ –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç–∏ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π –º–æ–≥—É—Ç –∏–∑–º–µ–Ω–∏—Ç—å –∑–Ω–∞–∫. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –ø—Ä–∏—Ä–∞—â–µ–Ω–∏–π –¥–æ –Ω–µ–±–æ–ª—å—à–æ–≥–æ —ç–ø—Å–∏–ª–æ–Ω –¥–ª—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏.

### –ú–∞—Ä–∫–æ–≤—Å–∫–∏–µ —Ü–µ–ø–∏ ‚Äî –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ

–ú–∞—Ä–∫–æ–≤—Å–∫–∞—è –º–æ–¥–µ–ª—å –ø–æ—Ä—è–¥–∫–∞ `n` (n-–≥—Ä–∞–º–º–∞ –ø–æ –∑–Ω–∞–∫–∞–º) –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–∏–º–≤–æ–ª–∞, –∑–Ω–∞—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ `n` —Å–∏–º–≤–æ–ª–æ–≤.

–ö—Ä–∞—Ç–∫–æ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (—Ñ—É–Ω–∫—Ü–∏—è: `build_markov_model(sequence, order)`):

* –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–Ω–∞–∫–æ–≤ –∏ —Å–æ–±–∏—Ä–∞–µ–º —Å—á—ë—Ç—á–∏–∫–∏ `counts[state][next]`, –≥–¥–µ `state` ‚Äî –∫–æ—Ä—Ç–µ–∂ –∏–∑ `order` –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∑–Ω–∞–∫–æ–≤.
* –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Å—á—ë—Ç—á–∏–∫–∏ –≤ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —Å –ø–æ–º–æ—â—å—é —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è add-`k` (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `counts_to_probabilities`).
* –ü–æ–ª—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –∏–º–µ–µ—Ç –≤–∏–¥ `{ "order": n, "table": { state_tuple: { next_sign: probability, ... }, ... } }`.

–ü—Ä–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–∏ –∫–æ–¥ –±–µ—Ä—ë—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ `order` –∑–Ω–∞–∫–æ–≤, –∏—â–µ—Ç –∏—Ö –≤ —Ç–∞–±–ª–∏—Ü–µ –∏ —Å–µ–º–ø–ª–∏—Ä—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –∑–Ω–∞–∫ –ø–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π. –ï—Å–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –º–æ–¥–µ–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `None` –∏ –≤–æ–∑–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –æ—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –≤ –∞–Ω—Å–∞–º–±–ª–µ.

–í–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

* –ï—Å–ª–∏ `order >= len(sequence)` –±–∏–ª–¥–µ—Ä –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É ‚Äî –æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞, —á–µ–º –¥–ª–∏–Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ.
* `table` ‚Äî —Å–ª–æ–≤–∞—Ä—å —Å –∫–ª—é—á–∞–º–∏-–∫–æ—Ä—Ç–µ–∂–∞–º–∏; –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ—Ä—Ç–µ–∂–µ–π –≤–º–µ—Å—Ç–æ —Å–∫–ª–µ–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —è—Å–Ω–æ—Å—Ç—å –∏ –∏–∑–±–µ–≥–∞–µ—Ç –∫–æ–ª–ª–∏–∑–∏–π.
* –°–µ–º–ø–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `predict_state` –ø—Å–µ–≤–¥–æ—Å–ª—É—á–∞–π–Ω–æ; —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≥–Ω–æ–∑—ã, –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å —Å–µ–º–ø–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ `argmax` –ø–æ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—è–º.

### –õ–∞–ø–ª–∞—Å–æ–≤–æ (add-k) —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ ‚Äî –≥–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ

–°–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π, –∫–æ–≥–¥–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã `state->next` –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –Ω–∞–±–ª—é–¥–∞–ª–∏—Å—å.

**–§–æ—Ä–º—É–ª–∞ add-k —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –≤ –∫–æ–¥–µ**:

–î–ª—è —Å—á—ë—Ç—á–∏–∫–∞ —Å –Ω–∞–±–ª—é–¥–∞–µ–º—ã–º–∏ —Å—á—ë—Ç–∞–º–∏ `m_i` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ `i` (–∑–¥–µ—Å—å `i` –≤ `{'+', '-'}`), –ø—É—Å—Ç—å `n = sum_i m_i`, –∞ `v` ‚Äî —á–∏—Å–ª–æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –Ω–∞–±–ª—é–¥–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–∏–º–≤–æ–ª–∞ (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ `v <= 2`). –°–≥–ª–∞–∂–µ–Ω–Ω–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–ª—è —Å–∏–º–≤–æ–ª–∞ `i`:

```
P(i) = (m_i + k) / (n + k * v)
```

–≠—Ç–æ –æ–±–æ–±—â–µ–Ω–∏–µ –ª–∞–ø–ª–∞—Å–æ–≤–∞ (add-1) —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è. –í –∫–æ–¥–µ `k = MODELS_SETTINGS["markov"]["k"]` –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–±–æ–ª—å—à–æ–µ `k` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `0.2`).

**–ü–æ—á–µ–º—É —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –≤–∞–∂–Ω–æ**:

* –ë–µ–∑ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è –Ω–µ–Ω–∞–±–ª—é–¥–∞–µ–º—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –∏–º–µ–µ—Ç –æ—Ü–µ–Ω–∫—É `0`. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ª–æ–º–∫–æ—Å—Ç–∏ –ø—Ä–∏ —Å–µ–º–ø–ª–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏ –Ω—É–ª–µ–≤—ã–º –ª–æ–≤—É—à–∫–∞–º –ø—Ä–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è—Ö.
* –°–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –¥–∞—ë—Ç –Ω–µ–Ω—É–ª–µ–≤—É—é –º–∞—Å—Å—É –Ω–µ–Ω–∞–±–ª—é–¥–∞–µ–º—ã–º —Å–æ–±—ã—Ç–∏—è–º, –ø–æ–∑–≤–æ–ª—è—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—é –∏ –∏–∑–±–µ–≥–∞—è —á—Ä–µ–∑–º–µ—Ä–Ω–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –Ω—É–ª—å‚Äë–≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—è—Ö.

**–í—ã–±–æ—Ä k**:

* `k = 1.0` ‚Äî –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–µ –ª–∞–ø–ª–∞—Å–æ–≤–æ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ. –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ –¥–ª—è –º–∞–ª—ã—Ö `n` (—Ç—è–≥–æ—Ç–∏—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–º—É).
* `0 < k < 1` ‚Äî –±–æ–ª–µ–µ –º—è–≥–∫–æ–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `0.2` –≤ —ç—Ç–æ–º —Ä–µ–ø–æ), –ø–æ–∑–≤–æ–ª—è—é—â–µ–µ –Ω–∞–±–ª—é–¥–∞–µ–º—ã–º —Å—á—ë—Ç–∞–º –¥–æ–º–∏–Ω–∏—Ä–æ–≤–∞—Ç—å, –Ω–æ –∑–∞—â–∏—â–∞—è –æ—Ç –Ω–µ–Ω–∞–±–ª—é–¥–∞–µ–º—ã—Ö —Å–æ–±—ã—Ç–∏–π.
* `k << 1` ‚Äî –ø–æ—á—Ç–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è; —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–æ –ø—Ä–∏ –¥–µ—Ñ–∏—Ü–∏—Ç–µ –¥–∞–Ω–Ω—ã—Ö.

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ—è—Å–Ω–µ–Ω–∏–µ –∏ –ø—Ä–∏–º–µ—Ä—ã**:

–ü—É—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ `('+', '+')` –∏–º–µ–µ—Ç —Å—á—ë—Ç—ã `{ '+': 4, '-': 1 }`.

* –ü—Ä–∏ `k=0` ‚Üí `{ '+': 4/5 = 0.8, '-': 0.2 }`.
* –ü—Ä–∏ `k=1` ‚Üí `{ '+': (4+1)/(5+1*2) = 5/7 ‚âà 0.714, '-': (1+1)/7 = 2/7 ‚âà 0.286 }`.
* –ü—Ä–∏ `k=0.2` ‚Üí –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å `5 + 0.2*2 = 5.4`; `P('+') = 4.2/5.4 ‚âà 0.7778; P('-') = 1.2/5.4 ‚âà 0.2222`.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º `k=0.2` –º—è–≥–∫–æ —Å–º–µ—â–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –≤ —Å—Ç–æ—Ä–æ–Ω—É —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–∏, –Ω–µ –ø–µ—Ä–µ–±–∏–≤–∞—è –Ω–∞–±–ª—é–¥–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ.

**–ö—Ä–∞–π–Ω–∏–µ —Å–ª—É—á–∞–∏**:

* –ï—Å–ª–∏ –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞–±–ª—é–¥–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ —Å–ª–µ–¥—É—é—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä `{'+': 3}`) –∏ `k` –º–∞–ª, —Å–≥–ª–∞–∂–µ–Ω–Ω—ã–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –±–ª–∏–∑–∫–∏–º–∏ –∫ `{'+': 1.0, '-': small}`.
* –ï—Å–ª–∏ `v` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ `len(counter)` (–Ω–∞–±–ª—é–¥–∞–µ–º–æ–µ —á–∏—Å–ª–æ —Ä–∞–∑–Ω—ã—Ö —Å–ª–µ–¥—É—é—â–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤), —Ç–æ –ø–µ—Ä–µ—Ö–æ–¥—ã –∫ —Ç–æ–∫–µ–Ω–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –Ω–∞–±–ª—é–¥–∞–ª–∏—Å—å, –æ—Å—Ç–∞—é—Ç—Å—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–º–∏, –µ—Å–ª–∏ –≤—ã —è–≤–Ω–æ –Ω–µ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç–µ –ø–æ–ª–Ω—ã–π –∞–ª—Ñ–∞–≤–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä `['+', '-', '0']`). –î–ª—è –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ `+/-` —ç—Ç–æ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞, –Ω–æ –ø—Ä–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ç–æ–∫–µ–Ω–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å `v` —Ä–∞–≤–Ω—ã–º —Ä–∞–∑–º–µ—Ä—É –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –∞–ª—Ñ–∞–≤–∏—Ç–∞.

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –∫ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—é**:

* **Backoff-–º–æ–¥–µ–ª–∏**: –µ—Å–ª–∏ —Ç–æ—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `order` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é –º–µ–Ω—å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞. –≠—Ç–æ –æ–±—ã—á–Ω–æ —É–ª—É—á—à–∞–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏–µ (–ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –º–æ–¥–µ–ª–µ–π –±–æ–ª—å—à–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞).
* **Kneser-Ney / Good-Turing**: –±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —è–∑—ã–∫–æ–≤–æ–≥–æ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è ‚Äî –∏–∑–±—ã—Ç–æ—á–Ω—ã –¥–ª—è –±–∏–Ω–∞—Ä–Ω—ã—Ö –∑–Ω–∞–∫–æ–≤, –Ω–æ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã.

**–ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**:

* –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–µ—Ä–µ–¥–∞—á—É —è–≤–Ω–æ–≥–æ `alphabet` –≤ `counts_to_probabilities`, —á—Ç–æ–±—ã `v` –±—ã–ª–æ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º –¥–ª—è –≤—Å–µ—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –ø—Ä–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ç–æ–∫–µ–Ω–æ–≤).
* –ù–æ—Ä–º–∞–ª–∏–∑—É–π—Ç–µ —É—Å—Ç–æ–π—á–∏–≤–æ —á–∏—Å–ª–µ–Ω–Ω–æ: –≤—ã—á–∏—Å–ª—è–π—Ç–µ `p = (m + k) / (n + k * v)`, –Ω–æ –∑–∞—â–∏—â–∞–π—Ç–µ –¥–µ–ª–µ–Ω–∏–µ `n + k * v != 0`.
* –ü—Ä–∏ —Å–µ–º–ø–ª–∏—Ä–æ–≤–∞–Ω–∏–∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—É–º–º–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π –ø—Ä–∏–º–µ—Ä–Ω–æ —Ä–∞–≤–Ω–∞ 1.0; –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–∏–≤–µ–¥–∏—Ç–µ –∫ –Ω–æ—Ä–º–µ –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –æ—à–∏–±–æ–∫ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è.

### –õ–∞–≥–æ–≤–∞—è –ª–∏–Ω–µ–π–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è ‚Äî –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∏ —á–∏—Å–ª–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

–†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π `diff` –∫–∞–∫ –ª–∏–Ω–µ–π–Ω—É—é –∫–æ–º–±–∏–Ω–∞—Ü–∏—é –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö `n_lags` –ø—Ä–∏—Ä–∞—â–µ–Ω–∏–π. –§–æ—Ä–º–∞–ª—å–Ω–æ:

```
≈∑_t = w_1 * diff_{t-1} + w_2 * diff_{t-2} + ... + w_n * diff_{t-n} + b
```

–ö–æ–¥ —Å—Ç—Ä–æ–∏—Ç –º–∞—Ç—Ä–∏—Ü—É –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ `X` —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ `[diff_{t-n}, ..., diff_{t-1}]` –∏ —Ü–µ–ª–µ–≤–æ–π –≤–µ–∫—Ç–æ—Ä `y = diff_t`.

**–û—Ü–µ–Ω–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** (—Ñ—É–Ω–∫—Ü–∏—è: `build_regression`):

* –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–æ–ª–±–µ—Ü –µ–¥–∏–Ω–∏—Ü –∫ `X` –¥–ª—è —Å–º–µ—â–µ–Ω–∏—è: `X_with_bias`.
* –†–µ—à–∞–µ–º `coeffs = (X^T X)^{-1} X^T y` (–Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ —É—Ä–∞–≤–Ω–µ–Ω–∏—è) –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –≤–µ–∫—Ç–æ—Ä –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ `[w_1, ..., w_n, b]`.

**–ß–∏—Å–ª–µ–Ω–Ω—ã–µ –æ–≥–æ–≤–æ—Ä–∫–∏**:

* –ú–∞—Ç—Ä–∏—Ü–∞ `X^T X` –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–∏–Ω–≥—É–ª—è—Ä–Ω–æ–π –∏–ª–∏ –ø–ª–æ—Ö–æ –æ–±—É—Å–ª–æ–≤–ª–µ–Ω–Ω–æ–π (–æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ –ø—Ä–∏–∑–Ω–∞–∫–∏ –∫–æ–ª–ª–∏–Ω–µ–∞—Ä–Ω—ã –∏–ª–∏ `N` –º–∞–ª–æ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å `n_lags`). –ü—Ä—è–º–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å `LinAlgError` –∏–ª–∏ —É—Å–∏–ª–µ–Ω–∏–µ —à—É–º–∞.
* –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —É—Å—Ç–æ–π—á–∏–≤—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:

  * –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `np.linalg.pinv(XtX)` (–ø—Å–µ–≤–¥–æ–æ–±—Ä–∞—Ç–Ω—É—é –ú—É—Ä–∞‚Äì–ü–µ–Ω—Ä–æ—É–∑–∞), –Ω–∞–ø—Ä–∏–º–µ—Ä `coeffs = np.linalg.pinv(X_with_bias) @ y_vec`.
  * –î–æ–±–∞–≤–∏—Ç—å —Ä–∏–¥–∂-—Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏—é: —Ä–µ—à–∞—Ç—å `(X^T X + Œª I) Œ∏ = X^T y`. –≠—Ç–æ —Å—Ç—è–≥–∏–≤–∞–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –∫ –Ω—É–ª—é –∏ —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä—É–µ—Ç –æ–±—Ä–∞—â–µ–Ω–∏–µ. –ú–∞–ª—ã–µ Œª (1e-6 .. 1e-2) —á–∞—Å—Ç–æ –ø–æ–º–æ–≥–∞—é—Ç.

**–í–∞—Ä–∏–∞–Ω—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å –ø—Å–µ–≤–¥–æ–æ–±—Ä–∞—Ç–Ω–æ–π**:

```
coeffs = np.linalg.pinv(X_with_bias) @ y_vec
```

–≠—Ç–æ –±–æ–ª–µ–µ —É—Å—Ç–æ–π—á–∏–≤–æ –∏ –∏–∑–±–µ–≥–∞–µ—Ç —è–≤–Ω–æ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è `X^T X`.

**–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ (—Ñ—É–Ω–∫—Ü–∏—è: `predict_diff`)**:

* –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ ‚Äî –ø—Ä–æ—Å—Ç–æ `weights.dot(inputs) + bias`. –í –∫–æ–¥–µ —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –≤–∏–¥–µ —è–≤–Ω–æ–≥–æ —Ü–∏–∫–ª–∞; —Å–∫–∞–ª—è—Ä–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∫–æ—Ä–æ—á–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ.

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è**:

* –ï—Å–ª–∏ `n_lags` –≤–µ–ª–∏–∫ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–±—É—á–∞—é—â–∏—Ö —Å—Ç—Ä–æ–∫, –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ. –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ `n_lags` –∏–ª–∏ —É–≤–µ–ª–∏—á—å—Ç–µ –æ–±—ä—ë–º –¥–∞–Ω–Ω—ã—Ö.
* –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏—Ä–∞—â–µ–Ω–∏–π (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è), –µ—Å–ª–∏ –≤–µ–ª–∏—á–∏–Ω—ã —Å–∏–ª—å–Ω–æ —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è ‚Äî —ç—Ç–æ —É–ª—É—á—à–∏—Ç –æ–±—É—Å–ª–æ–≤–ª–µ–Ω–Ω–æ—Å—Ç—å.
* –û—Ü–µ–Ω–∏—Ç–µ –º–æ–¥–µ–ª–∏ —Å –ø–æ–º–æ—â—å—é —Å–∫–æ–ª—å–∑—è—â–µ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (rolling window) –∏ –º–µ—Ç—Ä–∏–∫ MAE/RMSE.

### –ü—Ä–∞–≤–∏–ª–∞ –∞–Ω—Å–∞–º–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∏—á—å–∏—Ö

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ—Å—Ç–æ–π –∞–Ω—Å–∞–º–±–ª—å:

* **–ó–Ω–∞–∫ (–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ):** –ö–∞–∂–¥–∞—è –º–∞—Ä–∫–æ–≤—Å–∫–∞—è –º–æ–¥–µ–ª—å –≥–æ–ª–æ—Å—É–µ—Ç –∑–∞ `+` –∏–ª–∏ `-`. –ê–Ω—Å–∞–º–±–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –≥–æ–ª–æ—Å–æ–≤. –ï—Å–ª–∏ –º–æ–¥–µ–ª–∏ –≤–æ–∑–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è (—Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç), –æ–Ω–∏ –Ω–µ –≥–æ–ª–æ—Å—É—é—Ç. –ù–∏—á—å—è —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–º –≤—ã–±–æ—Ä–æ–º –º–µ–∂–¥—É –ª–∏–¥–µ—Ä–∞–º–∏.
* **–í–µ–ª–∏—á–∏–Ω–∞:** –ö–∞–∂–¥–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —á–∏—Å–ª–æ–≤–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –ø—Ä–∏—Ä–∞—â–µ–Ω–∏—è; –∞–Ω—Å–∞–º–±–ª—å —É—Å—Ä–µ–¥–Ω—è–µ—Ç —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è.
* **–ü—Ä–∞–≤–∏–ª–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è:** –ï—Å–ª–∏ —É—Å—Ä–µ–¥–Ω—ë–Ω–Ω–∞—è –≤–µ–ª–∏—á–∏–Ω–∞ —Ä–µ–≥—Ä–µ—Å—Å–∏–π –∏–º–µ–µ—Ç –∑–Ω–∞–∫, –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–π –≥–æ–ª–æ—Å—É –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –º–∞—Ä–∫–æ–≤—Å–∫–∏—Ö –º–æ–¥–µ–ª–µ–π, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –º–∞—Ä–∫–æ–≤—Å–∫–∏–π –∑–Ω–∞–∫ –∫ –∞–±—Å–æ–ª—é—Ç–Ω–æ–π –≤–µ–ª–∏—á–∏–Ω–µ (—Ç.–µ. `sign * abs(magnitude)`). –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∞–Ω—Å–∞–º–±–ª—å —É—á–∏—Ç—ã–≤–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–π –≥–æ–ª–æ—Å.

–ü–æ—á–µ–º—É —Ç–∞–∫–æ–π –¥–∏–∑–∞–π–Ω?

* –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –≤–µ–ª–∏—á–∏–Ω—ã –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–Ω—ã–º –∫–ª–∞—Å—Å–∞–º –º–æ–¥–µ–ª–µ–π —Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Ç–æ–º, —á—Ç–æ –æ–Ω–∏ —É–º–µ—é—Ç –ª—É—á—à–µ: –¥–∏—Å–∫—Ä–µ—Ç–Ω–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ (–ú–∞—Ä–∫–æ–≤) vs. –ª–∏–Ω–µ–π–Ω–∞—è —ç–∫—Å—Ç—Ä–∞–ø–æ–ª—è—Ü–∏—è (—Ä–µ–≥—Ä–µ—Å—Å–∏—è).
* –ü—Ä–∞–≤–∏–ª–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è ‚Äî –ø—Ä–∞–≥–º–∞—Ç–∏—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤—ã–µ –ø—Ä–æ–≥–Ω–æ–∑—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–∞—Ä–∫–æ–≤—Å–∫–∏–π –≥–æ–ª–æ—Å ‚Äî –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π, –∞ —Å—Ä–µ–¥–Ω—è—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è ‚Äî –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è). –î—Ä—É–≥–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω—ã (–≤–∑–≤–µ—à–∏–≤–∞–Ω–∏–µ, –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ –¥–æ–≤–µ—Ä–∏—è–º).

–í–∞—Ä–∏–∞–Ω—Ç—ã —É–ª—É—á—à–µ–Ω–∏–π:

* –í–∑–≤–µ—à–∏–≤–∞—Ç—å –º–∞—Ä–∫–æ–≤—Å–∫–∏–µ –≥–æ–ª–æ—Å–∞ –ø–æ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–æ–¥–µ–ª–∏ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ –ø–æ–ª—É—á–∞—é—Ç –±–æ–ª—å—à–∏–π –≤–µ—Å —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç), –∏–ª–∏ –≤–∑–≤–µ—à–∏–≤–∞—Ç—å —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ –ø–æ in-sample RMSE.
* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤–µ–ª–∏—á–∏–Ω: —Å–µ–º–ø–ª–∏—Ä–æ–≤–∞—Ç—å –≤–µ–ª–∏—á–∏–Ω—ã –∏–∑ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤, –∞ –Ω–µ –±—Ä–∞—Ç—å –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å—Ä–µ–¥–Ω–µ–µ.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
forex-prediction-bot/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.py         # Main script: bot logic, training and utilities (provided)
‚îÇ   ‚îî‚îÄ‚îÄ .env            # (local) TELEGRAM_TOKEN
‚îú‚îÄ‚îÄ datasets/           # CSV historical data (format below)
‚îú‚îÄ‚îÄ models/             # Saved .pkl models (markov_..., regression_...)
‚îú‚îÄ‚îÄ assets/             # static files (logo.png)
‚îú‚îÄ‚îÄ temp/               # temporary images before sending
‚îú‚îÄ‚îÄ requirements.txt    # dependencies
‚îî‚îÄ‚îÄ README.md           # this file (English)
```

## –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π)

–ö–∞–∂–¥—ã–π CSV-—Ñ–∞–π–ª –≤ `datasets/` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–∞–ª—é—Ç–Ω–æ–π –ø–∞—Ä–µ –∏ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫. –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ —Ç—Ä–µ–±—É–µ–º–∞—è –∫–æ–ª–æ–Ω–∫–∞: `Price`.

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç (–µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏, —Å—Ç–∞—Ä—ã–µ ‚Üí –Ω–æ–≤—ã–µ):

```csv
Date,Price,Sign,Difference
2005-04-04,35.938000,-,0.177000
2005-04-05,35.790000,-,0.148000
2005-04-06,35.845000,+,0.055000
```

–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

* `Date` ‚Äî ISO –¥–∞—Ç–∞ `YYYY-MM-DD`. –û—Å—Ç–∞–≤–ª—è–π—Ç–µ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —á—Ç–µ–Ω–∏—è –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤. –ï—Å–ª–∏ –æ–ø—É—Å—Ç–∏—Ç—å, –∫–æ–¥ –≤—Å—ë —Ä–∞–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ø–æ—Ä—è–¥–∫–∞ —Å—Ç—Ä–æ–∫.
* `Price` ‚Äî —á–∏—Å–ª–æ–≤–∞—è —Ü–µ–Ω–∞/–∫—É—Ä—Å (float). –ï—Å–ª–∏ –≤ —Ñ–∞–π–ª–∞—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–∞–ø—è—Ç—ã–µ –∫–∞–∫ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –¥–µ—Å—è—Ç–∏—á–Ω–æ–π —á–∞—Å—Ç–∏, –Ω–æ—Ä–º–∞–ª–∏–∑—É–π—Ç–µ –≤ —Ç–æ—á–∫–∏.
* `Sign` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ `+`/`-` —Ç–æ–∫–µ–Ω. –ï—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, `sign` –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω –∏–∑ `Price`.
* `Difference` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ `Price_today - Price_yesterday`. –ï—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ –∏–∑ `Price`.

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–µ:

* –û–±—Ä–µ–∂—å—Ç–µ –≤–µ–¥—É—â–∏–µ NaN –∏ —Å—Ç—Ä–æ–∫–∏ —Å –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.
* –ü–æ –∂–µ–ª–∞–Ω–∏—é –¥–æ–±–∞–≤—å—Ç–µ –∫–æ–ª–æ–Ω–∫—É `Volume`, –µ—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ —Ä–∞—Å—à–∏—Ä—è—Ç—å –º–æ–¥–µ–ª–∏.
* –ü—Ä–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö —É–±–µ–¥–∏—Ç–µ—Å—å –≤ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ—Ç–∏—Ä–æ–≤–∫–∏ (–∫–∞–∫–∞—è –≤–∞–ª—é—Ç–∞ –≤ —á–∏—Å–ª–∏—Ç–µ–ª–µ/–∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª–µ) –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º (`USDEUR.csv` –∏–ª–∏ `USD_EUR.csv`).

## –õ–æ–∫–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** Python 3.8+. `pip`.

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**

```bash
python -m venv venv
# activate venv
# Linux / macOS
source venv/bin/activate
# Windows
venv\Scripts\activate

pip install -r requirements.txt
```

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –≤ `requirements.txt`:

```
python-telegram-bot
requests
matplotlib
numpy
python-dotenv
```

**.env** (—Å–æ–∑–¥–∞–π—Ç–µ `src/.env`, –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ):

```
TELEGRAM_TOKEN="YOUR_BOTFATHER_TOKEN"
```

**–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º**: —Å–∫—Ä–∏–ø—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏. –î–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω–µ –∑–∞–¥–∞–π—Ç–µ –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏ –≤ `main.py`, –∫–∞–∫ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º README.

**–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞**:

```bash
# –∏–∑ –∫–æ—Ä–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
python src/main.py
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ `train_models_if_needed(...)` —Å–æ—Ö—Ä–∞–Ω–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–µ–≥—Ä–µ—Å—Å–∏–π –∏ –º–∞—Ä–∫–æ–≤—Å–∫–∏—Ö –º–æ–¥–µ–ª–µ–π –≤ `models/`.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ)

`MODELS_SETTINGS` –≤ `src/main.py` —É–ø—Ä–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

```python
MODELS_SETTINGS = {
    "REBUILD": True,    # force retrain on each start
    "reg": {"min_n": 3, "max_n": 10},
    "markov": {"min_n": 3, "max_n": 10, "k": 0.2}
}
```

* `REBUILD = True` ‚Äî –∫–∞–∂–¥—ã–π —Å—Ç–∞—Ä—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–æ–±—É—á–∞–µ—Ç (—É–¥–æ–±–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏). –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `False`, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ pickle-—Ñ–∞–π–ª—ã.
* `reg.min_n, reg.max_n` ‚Äî –¥–∏–∞–ø–∞–∑–æ–Ω —á–∏—Å–ª–∞ –ª–∞–≥–æ–≤ –¥–ª—è —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ (–≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ).
* `markov.min_n, markov.max_n` ‚Äî –¥–∏–∞–ø–∞–∑–æ–Ω –ø–æ—Ä—è–¥–∫–æ–≤ –º–∞—Ä–∫–æ–≤—Å–∫–∏—Ö –º–æ–¥–µ–ª–µ–π.
* `markov.k` ‚Äî –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ add-`k` –¥–ª—è —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è; –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `0.2`.

**–î—Ä—É–≥–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ `main.py`:**

* `CURRENCIES` ‚Äî —Å–ø–∏—Å–æ–∫ —Ç—Ä—ë—Ö–±—É–∫–≤–µ–Ω–Ω—ã—Ö –∫–æ–¥–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ø–∞—Ä.
* `BASE_LATEST`, `BASE_ARCHIVE` ‚Äî —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è API –¶–ë–†.
* `SESSION` & `retry_strategy` ‚Äî HTTP-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

## –û–±—É—á–µ–Ω–∏–µ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ (–∑–∞–º–µ—Ç–∫–∏ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

**–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –º–æ–¥–µ–ª–µ–π**:

* `regression_{BASE}{QUOTE}_{n}.pkl` ‚Äî –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –¥–ª—è `n` –ª–∞–≥–æ–≤ (–≤–µ–∫—Ç–æ—Ä –¥–ª–∏–Ω–æ–π `n + 1`, –≤–∫–ª—é—á–∞—è —Å–º–µ—â–µ–Ω–∏–µ).
* `markov_{BASE}{QUOTE}_{order}.pkl` ‚Äî —Å–ª–æ–≤–∞—Ä—å —Å `order` –∏ `table`.

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã —Ü–∏–∫–ª–∞ –æ–±—É—á–µ–Ω–∏—è (`train_models_if_needed`)**:

1. –ò—Ç–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ –Ω–µ–¥–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã–º –ø–∞—Ä–∞–º –∏–∑ `CURRENCIES`, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å –ø–∞—Ä—ã –≤–∏–¥–∞ `(EUR, USD)`.
2. –ß–∏—Ç–∞—Ç—å –∫–æ–ª–æ–Ω–∫–∏ `Sign` –∏ `Difference` –∏–∑ `datasets/{A}{B}.csv`.
3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ `n_lags` –∏–∑ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ —Ä–µ–≥—Ä–µ—Å—Å–∏–π –≤—ã–∑—ã–≤–∞—Ç—å `build_regression(diffs, n_lags)` –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
4. –î–ª—è –∫–∞–∂–¥–æ–≥–æ `order` –∏–∑ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –º–∞—Ä–∫–æ–≤–∞ —Å—Ç—Ä–æ–∏—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –º–æ–¥–µ–ª–∏.

**–ü–æ—Ç–æ–∫ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è (`_perform_prediction_and_edit`)**:

1. –ó–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ `needed_days` –∫—É—Ä—Å–æ–≤ (max –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –ø–æ—Ä—è–¥–∫–æ–≤/–ª–∞–≥–æ–≤) —á–µ—Ä–µ–∑ `fetch_sequences_all_pairs`.
2. –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ `diffs` –∏ `signs` –∏–∑ —Ü–µ–Ω.
3. –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–µ –∏ –º–∞—Ä–∫–æ–≤—Å–∫–∏–µ –º–æ–¥–µ–ª–∏ –∏–∑ `models/`.
4. –í—ã—á–∏—Å–ª–∏—Ç—å `forecasted_diffs` —á–µ—Ä–µ–∑ `forecast_diffs` (—É—Å—Ä–µ–¥–Ω—ë–Ω–Ω—ã–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è) –∏ `forecasted_signs` —á–µ—Ä–µ–∑ `forecast_signs` (–∞–Ω—Å–∞–º–±–ª—å –º–∞—Ä–∫–æ–≤—Å–∫–∏—Ö –≥–æ–ª–æ—Å–æ–≤).
5. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è: –µ—Å–ª–∏ –º–∞—Ä–∫–æ–≤—Å–∫–∏–π –∑–Ω–∞–∫ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç –∑–Ω–∞–∫—É —Ä–µ–≥—Ä–µ—Å—Å–∏–∏, –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—å –∑–Ω–∞–∫ –≤–µ–ª–∏—á–∏–Ω—ã.
6. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –ø—Ä–∏—Ä–∞—â–µ–Ω–∏—è –≤ –∫—É–º—É–ª—è—Ç–∏–≤–Ω—ã–µ `new_prices` –∏ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫.

## –î–µ—Ç–∞–ª–∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤

–§—É–Ω–∫—Ü–∏—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ `plot_sequence` —Ä–∏—Å—É–µ—Ç —Å—Ç–∞—Ä—ã–µ —Ü–µ–Ω—ã (–±–µ–ª–∞—è –ª–∏–Ω–∏—è) –∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω—ã–µ —Ü–µ–Ω—ã (–∑–µ–ª–µ–Ω–∞—è/–∫—Ä–∞—Å–Ω–∞—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è). –í–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏:

* –û—Å–∏, —Å–ø–∏–Ω—ã –∏ –º–µ—Ç–∫–∏ —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω—ã –ø–æ–¥ —Ç—ë–º–Ω—ã–π —Ñ–æ–Ω.
* X-–º–µ—Ç–∫–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–µ (`%d.%m`) –∏ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `today - (m - 1)`, –≥–¥–µ `m = len(old_prices)`.
* –¶–≤–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω–æ–π –ª–∏–Ω–∏–∏ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è, —Å—Ä–∞–≤–Ω–∏–≤–∞—è `new_prices[-1]` –∏ `old_prices[-1]`.

–£–ª—É—á—à–µ–Ω–∏—è –∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:

* –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–æ—Å—ã –¥–æ–≤–µ—Ä–∏—è: –≤—ã—á–∏—Å–ª–∏—Ç—å —Å—Ç. –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∞–Ω—Å–∞–º–±–ª—è —Ä–µ–≥—Ä–µ—Å—Å–∏–π –∏ –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å –∑–∞—Ç–µ–Ω—ë–Ω–Ω—É—é –æ–±–ª–∞—Å—Ç—å.
* –ù–∞—Ä–∏—Å–æ–≤–∞—Ç—å —Å–∞–º–∏ –ø—Ä–∏—Ä–∞—â–µ–Ω–∏—è –≤ –≤–∏–¥–µ —Å—Ç–æ–ª–±—á–∞—Ç–æ–π –¥–∏–∞–≥—Ä–∞–º–º—ã –Ω–∞ –≤—Ç–æ—Ä–∏—á–Ω–æ–π –æ—Å–∏ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏.
* –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä–∫–µ—Ä—ã –¥–ª—è –Ω–∞–±–ª—é–¥–∞–µ–º—ã—Ö –∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω—ã—Ö —Ç–æ—á–µ–∫ –¥–ª—è –æ–±–ª–µ–≥—á–µ–Ω–∏—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.

## –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å –ø–∞—Ä—Å–µ—Ä–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

`fetch_sequences_all_pairs` —Å—Ç—Ä–æ–∏—Ç —Å–ª–æ–≤–∞—Ä—å –¥–∞—Ç–∞ ISO ‚Üí –∫—É—Ä—Å—ã –ø–∞—Ä –¥–ª—è `days` –¥–Ω–µ–π –Ω–∞–∑–∞–¥ –æ—Ç —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π –¥–∞—Ç—ã. –ü—Ä–æ—Ü–µ—Å—Å:

* –î–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–Ω—è –≤ –æ–∫–Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `fetch_for_date`, –∫–æ—Ç–æ—Ä—ã–π –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å `base_latest` –∏–ª–∏ `base_archive/YYYY/MM/DD/daily_json.js`.
* –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –æ–Ω –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –ø–æ–ø—ã—Ç–∫—É –æ–¥–∏–Ω —Ä–∞–∑ (—Å –Ω–µ–±–æ–ª—å—à–∏–º —Å–ª–∏–ø–æ–º) –∏ –≤ –∫–æ–Ω—Ü–µ –ø—Ä–æ–±—É–µ—Ç `base_latest` –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –¥–Ω–µ–π.
* –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç JSON-–∫—É—Ä—Å—ã –≤ –º–∞—Ç—Ä–∏—Ü—É –ø–æ–ø–∞—Ä–Ω—ã—Ö —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–π `target_per_base`.

–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

* –õ–∏–º–∏—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤: —Å—Ç—Ä–∞—Ç–µ–≥–∏—è `Retry` –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞. –ï—Å–ª–∏ –≤—ã –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç–µ –±–æ–ª—å—à–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –æ–∫–Ω–∞, —É–≤–∞–∂–∞–π—Ç–µ –ª–∏–º–∏—Ç—ã API.
* –ß–∞—Å—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: —Ñ—É–Ω–∫—Ü–∏—è —Ö—Ä–∞–Ω–∏—Ç `last_known` –¥–ª—è –∫–∞–∂–¥–æ–π –≤–∞–ª—é—Ç—ã –∏ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –¥–Ω–µ–π ‚Äî —ç—Ç–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–æ–±–µ–ª—ã, –Ω–æ –º–æ–∂–µ—Ç —Å–∫—Ä—ã—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–∞–∑—Ä—ã–≤—ã. –ï—Å–ª–∏ –≤—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ –ø–∞–¥–∞—Ç—å –ø—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–∞—Ö, –∏–∑–º–µ–Ω–∏—Ç–µ –ª–æ–≥–∏–∫—É, —á—Ç–æ–±—ã –±—Ä–æ—Å–∞—Ç—å –æ—à–∏–±–∫—É –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö.
* –†–∞–∑–ª–∏—á–∏—è –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–æ–Ω–∞—Ö –∏ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ: API –æ—Ç–¥–∞—ë—Ç –∫–æ–Ω–µ—á–Ω—ã–µ –¥–Ω–µ–≤–Ω—ã–µ –∫—É—Ä—Å—ã –ø–æ –º–æ—Å–∫–æ–≤—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏; –±—É–¥—å—Ç–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã –ø—Ä–∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏.

## –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ)

–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –ø–µ—Ä–µ—á–∏—Å–ª—è–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–≥–æ–≤–æ—Ä–∫–∏ –±–µ–∑ –ø—Ä–µ–¥–ø–∏—Å—ã–≤–∞—é—â–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

* **–≠–∫—Å–ø—Ä–µ—Å—Å–∏–≤–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–µ–π:** –ú–∞—Ä–∫–æ–≤—Å–∫–∏–µ —Ü–µ–ø–∏ –ø–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è–º –∑–Ω–∞–∫–æ–≤ –∏ –ª–∏–Ω–µ–π–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è –ø–æ –ø—Ä–∏—Ä–∞—â–µ–Ω–∏—è–º ‚Äî –æ—á–µ–Ω—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏: –æ–Ω–∏ —É–ª–∞–≤–ª–∏–≤–∞—é—Ç –ø—Ä–æ—Å—Ç—ã–µ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Ç–æ–ª—å–∫–æ –ª–∏–Ω–µ–π–Ω—É—é –∞–≤—Ç–æ–∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é.
* **–ß–∏—Å–ª–æ–≤–∞—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å:** –†–µ–≥—Ä–µ—Å—Å–∏—è —á–µ—Ä–µ–∑ –ø—Ä—è–º–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ `X^T X` –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—É—Å—Ç–æ–π—á–∏–≤–æ–π. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `pinv` –∏–ª–∏ —Ä–∏–¥–∂-—Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏—é.
* **–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –≤—ã–≤–æ–¥–æ–≤:** –ê–Ω—Å–∞–º–±–ª—å —ç–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π; —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –º–µ–Ω—è—é—Ç –ø—Ä–æ–≥–Ω–æ–∑—ã.
* **–°–µ–º–ø–ª–∏—Ä–æ–≤–∞–Ω–∏–µ vs argmax:** –°–µ–º–ø–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ –º–∞—Ä–∫–æ–≤—Å–∫–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–∞—ë—Ç –Ω–µ–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≥–Ω–æ–∑—ã; –∑–∞–º–µ–Ω–∞ –Ω–∞ `argmax` –¥–∞—ë—Ç –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤—ã—Ö–æ–¥—ã (–Ω–æ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–æ—Ü–µ–Ω–∏–≤–∞—Ç—å –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω—ã–π –≤—ã–±–æ—Ä).

## –ò–¥–µ–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏–π / TODO (–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –¥–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞)

1. **–ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:**

   * –î–æ–±–∞–≤–∏—Ç—å backoff –∏–ª–∏ –∏–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Ä–∫–æ–≤—Å–∫–∏–µ –º–æ–¥–µ–ª–∏ (–æ—Ç–∫–∞—Ç –∫ –º–æ–¥–µ–ª—è–º –º–µ–Ω—å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞, –µ—Å–ª–∏ –≤—ã—Å–æ–∫–∏–π –ø–æ—Ä—è–¥–æ–∫ –Ω–µ –Ω–∞–±–ª—é–¥–∞–ª—Å—è).
   * –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏ –≤–µ–ª–∏—á–∏–Ω—ã (–≥–µ—Ç–µ—Ä–æ—Å–∫–µ–¥–∞—Å—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è –∏–ª–∏ –±–∞–π–µ—Å–æ–≤—Å–∫–∞—è –ª–∏–Ω–µ–π–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤.
   * –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–∏: —Å–∫–æ–ª—å–∑—è—â–∏–µ —Å—Ä–µ–¥–Ω–∏–µ, –º–µ—Ä—ã –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏, –ª–∞–≥–æ–≤—ã–µ –∑–Ω–∞–∫–∏ –∫–∞–∫ –±–∏–Ω–∞—Ä–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏, —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏.

2. **–û–±—É—á–µ–Ω–∏–µ –∏ –æ—Ü–µ–Ω–∫–∞:**

   * –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∫–æ–ª—å–∑—è—â—É—é –∫—Ä–æ—Å—Å-–≤–∞–ª–∏–¥–∞—Ü–∏—é –∏ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å MAE/RMSE –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏. –•—Ä–∞–Ω–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ (rmse, n_train, last_refit).
   * –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–π —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –º–æ–¥–µ–ª–µ–π.

3. **–ß–∏—Å–ª–æ–≤–∞—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∏ —Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏—è:**

   * –ó–∞–º–µ–Ω–∏—Ç—å –ø—Ä—è–º–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –Ω–∞ `np.linalg.pinv` –∏–ª–∏ —Ä–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `np.linalg.lstsq`.
   * –î–æ–±–∞–≤–∏—Ç—å Ridge (`Œª`) –∫–∞–∫ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—É—é –æ–ø—Ü–∏—é.

4. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç:**

   * –î–æ–±–∞–≤–∏—Ç—å EMA –∏ –Ω–µ–±–æ–ª—å—à–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç—á—ë—Ç –æ –Ω–µ–¥–∞–≤–Ω–µ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏.
   * –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Ä–µ–∂–∏–º –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑–∞ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏.

5. **–ò–Ω–∂–µ–Ω–µ—Ä–∏—è:**

   * –î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç—ã –¥–ª—è `build_markov_model`, `build_regression`, `counts_to_probabilities` –∏ `plot_sequence`.
   * –î–æ–±–∞–≤–∏—Ç—å Dockerfile –∏ –ø—Ä–æ—Å—Ç–æ–π systemd unit –∫–∞–∫ –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–µ–ø–ª–æ—è.

## –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT ‚Äî —Å–º. `LICENSE`.

---