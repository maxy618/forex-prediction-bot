üìò [English version](README.md)

# –¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∞–ª—é—Ç–Ω—ã—Ö –∫—É—Ä—Å–æ–≤

> **–ö–æ—Ä–æ—Ç–∫–æ:** –ù–µ–±–æ–ª—å—à–æ–π Telegram-–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç –≤–∞–ª—é—Ç–Ω—ã–µ –∫—É—Ä—Å—ã —Å –ø–æ–º–æ—â—å—é –∞–Ω—Å–∞–º–±–ª—è –º–∞—Ä–∫–æ–≤—Å–∫–∏—Ö —Ü–µ–ø–µ–π (–ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è) –∏ –ª–∞–≥–æ–≤–æ–π –ª–∏–Ω–µ–π–Ω–æ–π —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ (–ø—Ä–æ–≥–Ω–æ–∑ –≤–µ–ª–∏—á–∏–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è). –í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ ‚Äî –∫–æ–¥ –±–æ—Ç–∞, –ø–∞—Ä—Å–µ—Ä –¥–∞–Ω–Ω—ã—Ö, –æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –∏ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤.

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

* [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
* [–ò–¥–µ—è –∏ –∞–ª–≥–æ—Ä–∏—Ç–º—ã (–ø–æ–¥—Ä–æ–±–Ω–æ)](#–∏–¥–µ—è-–∏-–∞–ª–≥–æ—Ä–∏—Ç–º—ã-–ø–æ–¥—Ä–æ–±–Ω–æ)
  * [–ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –ø—Ä–∏–∑–Ω–∞–∫–∏](#–ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞-–∏-–ø—Ä–∏–∑–Ω–∞–∫–∏)
  * [–ú–∞—Ä–∫–æ–≤—Å–∫–∏–µ —Ü–µ–ø–∏ ‚Äî –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ](#–º–∞—Ä–∫–æ–≤—Å–∫–∏–µ-—Ü–µ–ø–∏--–ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ-–∏-—Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ)
  * [–õ–∞–ø–ª–∞—Å–æ–≤–æ (add-k) —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ ‚Äî —Ñ–æ—Ä–º—É–ª–∞](#–ª–∞–ø–ª–∞—Å–æ–≤–æ-add-k-—Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ--—Ñ–æ—Ä–º—É–ª–∞)
  * [–õ–∞–≥–æ–≤–∞—è –ª–∏–Ω–µ–π–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è ‚Äî –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∏ —á–∏—Å–ª–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã](#–ª–∞–≥–æ–≤–∞—è-–ª–∏–Ω–µ–π–Ω–∞—è-—Ä–µ–≥—Ä–µ—Å—Å–∏—è--–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞-–∏-—á–∏—Å–ª–µ–Ω–Ω—ã–µ-–≤–æ–ø—Ä–æ—Å—ã)
  * [–ü—Ä–∞–≤–∏–ª–∞ –∞–Ω—Å–∞–º–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∏—á—å–∏—Ö](#–ø—Ä–∞–≤–∏–ª–∞-–∞–Ω—Å–∞–º–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è-–∏-—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ-–Ω–∏—á—å–∏—Ö)
* [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
* [–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π)](#—Ñ–æ—Ä–º–∞—Ç-–¥–∞–Ω–Ω—ã—Ö-—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π)
* [–õ–æ–∫–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#–ª–æ–∫–∞–ª—å–Ω–∞—è-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
* [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-–∏-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
* [–û–±—É—á–µ–Ω–∏–µ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ (–∑–∞–º–µ—Ç–∫–∏ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)](#–æ–±—É—á–µ–Ω–∏–µ-–∏-–ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ-–∑–∞–º–µ—Ç–∫–∏-–ø–æ-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
* [–î–µ—Ç–∞–ª–∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤](#–¥–µ—Ç–∞–ª–∏-–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏-–∏-–ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è-–≥—Ä–∞—Ñ–∏–∫–æ–≤)
* [–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å –ø–∞—Ä—Å–µ—Ä–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö](#–Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å-–ø–∞—Ä—Å–µ—Ä–∞-–∏-–ø–æ–ª—É—á–µ–Ω–∏–µ-–¥–∞–Ω–Ω—ã—Ö)
* [–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ)](#–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è-–∏-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è-—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ)
* [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## –û–±–∑–æ—Ä

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω, –∫–æ—Ç–æ—Ä—ã–π:

* –∑–∞–≥—Ä—É–∂–∞–µ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç (–∏—Å—Ç–æ—á–Ω–∏–∫: JSON API –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ –±–∞–Ω–∫–∞ –†–æ—Å—Å–∏–∏),
* —Å—Ç—Ä–æ–∏—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ü–µ–Ω –¥–ª—è –ø–∞—Ä, —Ç–∞–∫–∏—Ö –∫–∞–∫ `USD_per_EUR`, `EUR_per_RUB` –∏ —Ç.–¥.,
* –≤—ã—á–∏—Å–ª—è–µ—Ç –¥–Ω–µ–≤–Ω—ã–µ –ø—Ä–∏—Ä–∞—â–µ–Ω–∏—è –∏ –∏—Ö –∑–Ω–∞–∫–∏ (–≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑),
* –æ–±—É—á–∞–µ—Ç –º–∞—Ä–∫–æ–≤—Å–∫–∏–µ –º–æ–¥–µ–ª–∏ –Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è—Ö –∑–Ω–∞–∫–æ–≤ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è,
* –æ–±—É—á–∞–µ—Ç –ª–∞–≥–æ–≤—ã–µ –ª–∏–Ω–µ–π–Ω—ã–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ –Ω–∞ –ø—Ä–∏—Ä–∞—â–µ–Ω–∏—è—Ö –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≤–µ–ª–∏—á–∏–Ω—ã —Å–ª–µ–¥—É—é—â–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è,
* –∫–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç –≤—ã–≤–æ–¥—ã –º–æ–¥–µ–ª–µ–π –≤ –∞–Ω—Å–∞–º–±–ª–µ–≤—ã–π –ø—Ä–æ–≥–Ω–æ–∑ –∏ —Å—Ç—Ä–æ–∏—Ç –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫ –Ω–∞ N –¥–Ω–µ–π –≤–ø–µ—Ä—ë–¥,
* –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Telegram-–±–æ—Ç–∞ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–≥–Ω–æ–∑–æ–≤.

---

## –ò–¥–µ—è –∏ –∞–ª–≥–æ—Ä–∏—Ç–º—ã (–ø–æ–¥—Ä–æ–±–Ω–æ)

### –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –ø—Ä–∏–∑–Ω–∞–∫–∏

–í—Ö–æ–¥: –≤—Ä–µ–º–µ–Ω–Ω–∞—è —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–∞—è —Å–µ—Ä–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö —Ü–µ–Ω `Price(t)`.

–í—ã—á–∏—Å–ª—è–µ–º:

1. `diff(t) = |Price(t) - Price(t-1)|` ‚Äî —Å–¥–≤–∏–≥ —Ü–µ–Ω—ã (float).
2. `sign(t) = '+' if diff(t) >= 0 else '-'` ‚Äî –¥–∏—Å–∫—Ä–µ—Ç–Ω–∞—è –º–µ—Ç–∫–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

–ü—Ä–∏–º–µ—á–∞–Ω–∏—è –∏ –∫—Ä–∞–π–Ω–∏–µ —Å–ª—É—á–∞–∏:

* –ï—Å–ª–∏ –≤ CSV –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–µ –¥–Ω–∏, —Å–æ—Å–µ–¥–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ —Ç—Ä–∞–∫—Ç—É—é—Ç—Å—è –∫–∞–∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —Ç–æ—Ä–≥–æ–≤—ã–µ —Ç–æ—á–∫–∏, –µ—Å–ª–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —è–≤–Ω–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ.
* –ù—É–ª–µ–≤—ã–µ –ø—Ä–∏—Ä–∞—â–µ–Ω–∏—è –≤ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞—é—Ç `-` (–ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∏—á—å–µ–π).
* –ú–µ–ª–∫–∏–µ –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç–∏ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π –º–æ–≥—É—Ç –∏–∑–º–µ–Ω–∏—Ç—å –∑–Ω–∞–∫ ‚Äî —É—á–∏—Ç—ã–≤–∞–π—Ç–µ —ç—Ç–æ –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤.

### –ú–∞—Ä–∫–æ–≤—Å–∫–∏–µ —Ü–µ–ø–∏ ‚Äî –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ

–ú–∞—Ä–∫–æ–≤—Å–∫–∞—è –º–æ–¥–µ–ª—å –ø–æ—Ä—è–¥–∫–∞ `n` (n-–≥—Ä–∞–º–º–∞ –ø–æ –∑–Ω–∞–∫–∞–º) –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–∏–º–≤–æ–ª–∞, –∑–Ω–∞—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ `n` —Å–∏–º–≤–æ–ª–æ–≤.

–ö—Ä–∞—Ç–∫–æ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (—Ñ—É–Ω–∫—Ü–∏—è: `build_markov_model(sequence, order)`):

* –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–Ω–∞–∫–æ–≤ –∏ —Å–æ–±–∏—Ä–∞–µ–º —Å—á—ë—Ç—á–∏–∫–∏ `counts[state][next]`, –≥–¥–µ `state` ‚Äî –∫–æ—Ä—Ç–µ–∂ –∏–∑ `order` –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∑–Ω–∞–∫–æ–≤.
* –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Å—á—ë—Ç—á–∏–∫–∏ –≤ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —Å –ø–æ–º–æ—â—å—é add-`k` —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `counts_to_probabilities`).
* –ò—Ç–æ–≥–æ–≤–∞—è –º–æ–¥–µ–ª—å ‚Äî `{ "order": n, "table": { state_tuple: { next_sign: probability, ... }, ... } }`.

–ü—Ä–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–∏ –∫–æ–¥ –±–µ—Ä—ë—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ `order` –∑–Ω–∞–∫–æ–≤, –∏—â–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü–µ –∏ —Å–µ–º–ø–ª–∏—Ä—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –∑–Ω–∞–∫ –ø–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é. –ï—Å–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –º–æ–¥–µ–ª—å –≤–æ–∑–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –æ—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –≤ –∞–Ω—Å–∞–º–±–ª–µ.

–í–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

* –ï—Å–ª–∏ `order >= len(sequence)` –±–∏–ª–¥–µ—Ä–∞ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É.
* `table` ‚Äî —Å–ª–æ–≤–∞—Ä—å —Å –∫–ª—é—á–∞–º–∏-–∫–æ—Ä—Ç–µ–∂–∞–º–∏; —ç—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–ª–∏–∑–∏–∏ –∏ –¥–µ–ª–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —è–≤–Ω–æ–π.
* –°–µ–º–ø–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Å–µ–≤–¥–æ—Å–ª—É—á–∞–π–Ω–æ; –¥–ª—è –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω—ã–π —Å–∏–º–≤–æ–ª.

### –õ–∞–ø–ª–∞—Å–æ–≤–æ (add-k) —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ ‚Äî —Ñ–æ—Ä–º—É–ª–∞

–°–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –Ω–µ–Ω—É–ª–µ–≤—É—é –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –Ω–µ–Ω–∞–±–ª—é–¥–∞–µ–º—ã–º –ø–µ—Ä–µ—Ö–æ–¥–∞–º.

–ü—É—Å—Ç—å –µ—Å—Ç—å –Ω–∞–±–ª—é–¥–∞–µ–º—ã–µ —Å—á—ë—Ç—ã `m_i` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ `i`, `n = sum_i m_i`, –∞ `v` ‚Äî —á–∏—Å–ª–æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–∏–º–≤–æ–ª–∞. –°–≥–ª–∞–∂–µ–Ω–Ω–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–ª—è —Å–∏–º–≤–æ–ª–∞ `i` –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∫–∞–∫:

```
P(i) = (m_i + k) / (n + k * v)
```

–í –∫–æ–¥–µ `k = MODELS_SETTINGS["markov"]["k"]` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `0.2`).

### –õ–∞–≥–æ–≤–∞—è –ª–∏–Ω–µ–π–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è ‚Äî –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∏ —á–∏—Å–ª–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

–†–µ–≥—Ä–µ—Å—Å–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π `diff` –∫–∞–∫ –ª–∏–Ω–µ–π–Ω—É—é –∫–æ–º–±–∏–Ω–∞—Ü–∏—é –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö `n_lags` –ø—Ä–∏—Ä–∞—â–µ–Ω–∏–π:

```
≈∑_t = w_1 * diff_{t-1} + w_2 * diff_{t-2} + ... + w_n * diff_{t-n} + b
```

–ú–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ `X` —Å—Ç—Ä–æ–∏—Ç—Å—è —Å—Ç—Ä–æ–∫–∞–º–∏ `[diff_{t-n}, ..., diff_{t-1}]`, —Ü–µ–ª–µ–≤–æ–π –≤–µ–∫—Ç–æ—Ä `y = diff_t`.

–û—Ü–µ–Ω–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (—Ñ—É–Ω–∫—Ü–∏—è: `build_regression`):

* –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–æ–ª–±–µ—Ü –µ–¥–∏–Ω–∏—Ü –≤ `X` –¥–ª—è —Å–º–µ—â–µ–Ω–∏—è: `X_with_bias`.
* –†–µ—à–∞–µ–º —Å–∏—Å—Ç–µ–º—É (–Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ —É—Ä–∞–≤–Ω–µ–Ω–∏—è) –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–æ–ª–µ–µ —É—Å—Ç–æ–π—á–∏–≤—ã–µ —á–∏—Å–ª–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤.

–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ (—Ñ—É–Ω–∫—Ü–∏—è: `predict_diff`) ‚Äî `weights.dot(inputs) + bias`.

### –ü—Ä–∞–≤–∏–ª–∞ –∞–Ω—Å–∞–º–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∏—á—å–∏—Ö

–ê–Ω—Å–∞–º–±–ª—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —É—Å—Ç—Ä–æ–µ–Ω —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

* **–ó–Ω–∞–∫ (–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ):** –∫–∞–∂–¥–∞—è –º–∞—Ä–∫–æ–≤—Å–∫–∞—è –º–æ–¥–µ–ª—å –≥–æ–ª–æ—Å—É–µ—Ç –∑–∞ `+` –∏–ª–∏ `-`. –ê–Ω—Å–∞–º–±–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –≥–æ–ª–æ—Å–æ–≤. –ú–æ–¥–µ–ª–∏ —Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤–æ–∑–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è. –ù–∏—á—å—è —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–º –≤—ã–±–æ—Ä–æ–º.
* **–í–µ–ª–∏—á–∏–Ω–∞:** —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —á–∏—Å–ª–æ–≤—ã–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –ø—Ä–∏—Ä–∞—â–µ–Ω–∏–π; –∞–Ω—Å–∞–º–±–ª—å —É—Å—Ä–µ–¥–Ω—è–µ—Ç —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è.
* **–ü—Ä–∞–≤–∏–ª–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è:** –µ—Å–ª–∏ —É—Å—Ä–µ–¥–Ω—ë–Ω–Ω–∞—è –≤–µ–ª–∏—á–∏–Ω–∞ —Ä–µ–≥—Ä–µ—Å—Å–∏–π –∏–º–µ–µ—Ç –∑–Ω–∞–∫, –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–π –º–∞—Ä–∫–æ–≤—Å–∫–æ–º—É –±–æ–ª—å—à–∏–Ω—Å—Ç–≤—É, –∞–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏–º–µ–Ω—è–µ—Ç –º–∞—Ä–∫–æ–≤—Å–∫–∏–π –∑–Ω–∞–∫ –∫ –∞–±—Å–æ–ª—é—Ç–Ω–æ–π –≤–µ–ª–∏—á–∏–Ω–µ (—Ç.–µ. `sign * abs(magnitude)`).

–≠—Ç–æ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫–∏, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –≤ –∫–æ–¥–µ.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
forex-prediction-bot/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.py         # Main script: bot logic, training and utilities
‚îÇ   ‚îî‚îÄ‚îÄ .env            # (local) TELEGRAM_TOKEN
‚îú‚îÄ‚îÄ datasets/           # CSV historical data (format below)
‚îú‚îÄ‚îÄ models/             # Saved .pkl models (markov_..., regression_...)
‚îú‚îÄ‚îÄ assets/             # static files (logo.png)
‚îú‚îÄ‚îÄ temp/               # temporary images before sending
‚îú‚îÄ‚îÄ requirements.txt    # dependencies
‚îî‚îÄ‚îÄ README.md           # this file (English)
```

## –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π)

–ö–∞–∂–¥—ã–π CSV-—Ñ–∞–π–ª –≤ `datasets/` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–∞–ª—é—Ç–Ω–æ–π –ø–∞—Ä–µ –∏ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫. –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ —Ç—Ä–µ–±—É–µ–º–∞—è –∫–æ–ª–æ–Ω–∫–∞: `Price`.

–ö–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç (–µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏, —Å—Ç–∞—Ä—ã–µ ‚Üí –Ω–æ–≤—ã–µ):

```csv
Date,Price,Sign,Difference
2005-04-04,35.938000,-,0.177000
2005-04-05,35.790000,-,0.148000
2005-04-06,35.845000,+,0.055000
```

–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫:

* `Date` ‚Äî ISO –¥–∞—Ç–∞ `YYYY-MM-DD`.
* `Price` ‚Äî —á–∏—Å–ª–æ–≤–∞—è —Ü–µ–Ω–∞/–∫—É—Ä—Å (float).
* `Sign` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω `+`/`-`. –ï—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, `sign` –º–æ–∂–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å –∏–∑ `Price`.
* `Difference` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ `Price_today - Price_yesterday`.

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–µ:

* –£–¥–∞–ª–∏—Ç–µ –≤–µ–¥—É—â–∏–µ NaN –∏ —Å—Ç—Ä–æ–∫–∏ —Å –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.
* –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤—å—Ç–µ –∫–æ–ª–æ–Ω–∫—É `Volume` –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π.
* –ü—Ä–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∫–æ—Ç–∏—Ä–æ–≤–æ–∫ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ (`USDEUR.csv` –∏–ª–∏ `USD_EUR.csv`).

## –õ–æ–∫–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** Python 3.8+. `pip`.

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**

```bash
python -m venv venv
# activate venv
# Linux / macOS
source venv/bin/activate
# Windows
venv\Scripts\activate

pip install -r requirements.txt
```

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –≤ `requirements.txt`:

```
python-telegram-bot
requests
matplotlib
numpy
python-dotenv
```

**.env** (—Å–æ–∑–¥–∞–π—Ç–µ `src/.env`, –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ):

```
TELEGRAM_TOKEN="YOUR_BOTFATHER_TOKEN"
```

**–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞**:

```bash
# –∏–∑ –∫–æ—Ä–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
python src/main.py
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç –º–æ–¥–µ–ª–∏ –≤ –ø–∞–ø–∫–µ `models/`.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

`MODELS_SETTINGS` –≤ `src/main.py` —É–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

```python
MODELS_SETTINGS = {
    "REBUILD": True,    # force retrain on each start
    "reg": {"min_n": 3, "max_n": 10},
    "markov": {"min_n": 3, "max_n": 10, "k": 0.2}
}
```

* `REBUILD` ‚Äî –ø–µ—Ä–µ–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ, –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
* `reg.min_n, reg.max_n` ‚Äî –¥–∏–∞–ø–∞–∑–æ–Ω —á–∏—Å–ª–∞ –ª–∞–≥–æ–≤ –¥–ª—è —Ä–µ–≥—Ä–µ—Å—Å–∏–∏.
* `markov.min_n, markov.max_n` ‚Äî –¥–∏–∞–ø–∞–∑–æ–Ω –ø–æ—Ä—è–¥–∫–æ–≤ –º–∞—Ä–∫–æ–≤—Å–∫–∏—Ö –º–æ–¥–µ–ª–µ–π.
* `markov.k` ‚Äî –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è add-`k`.

–î—Ä—É–≥–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ `main.py`: `CURRENCIES`, `BASE_LATEST`, `BASE_ARCHIVE`, `SESSION` –∏ `retry_strategy`.

## –û–±—É—á–µ–Ω–∏–µ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ (–∑–∞–º–µ—Ç–∫–∏ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –º–æ–¥–µ–ª–µ–π:

* `regression_{BASE}{QUOTE}_{n}.pkl` ‚Äî –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –¥–ª—è `n` –ª–∞–≥–æ–≤ (–≤–µ–∫—Ç–æ—Ä –¥–ª–∏–Ω–æ–π `n + 1`).
* `markov_{BASE}{QUOTE}_{order}.pkl` ‚Äî —Å–ª–æ–≤–∞—Ä—å —Å `order` –∏ `table`.

–û—Å–Ω–æ–≤–Ω—ã–µ —à–∞–≥–∏ —Ü–∏–∫–ª–∞ –æ–±—É—á–µ–Ω–∏—è (`train_models_if_needed`):

1. –ü–µ—Ä–µ–±–∏—Ä–∞—é—Ç—Å—è –Ω–µ–¥–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä—ã –∏–∑ `CURRENCIES` ‚Üí –ø–∞—Ä—ã –≤–∏–¥–∞ `(EUR, USD)`.
2. –ß–∏—Ç–∞—é—Ç—Å—è –∫–æ–ª–æ–Ω–∫–∏ `Sign` –∏ `Difference` –∏–∑ `datasets/{A}{B}.csv`.
3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ `n_lags` –∏–∑ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `build_regression(diffs, n_lags)` –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è.
4. –î–ª—è –∫–∞–∂–¥–æ–≥–æ `order` —Å—Ç—Ä–æ—è—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–∞—Ä–∫–æ–≤—Å–∫–∏–µ –º–æ–¥–µ–ª–∏.

–ü–æ—Ç–æ–∫ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è:

1. –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ `needed_days` –∫—É—Ä—Å–æ–≤ —á–µ—Ä–µ–∑ `fetch_sequences_all_pairs`.
2. –ü–æ—Å—Ç—Ä–æ–∏—Ç—å `diffs` –∏ `signs` –∏–∑ —Ü–µ–Ω.
3. –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏ –∏–∑ `models/`.
4. –í—ã—á–∏—Å–ª–∏—Ç—å `forecasted_diffs` (—É—Å—Ä–µ–¥–Ω—ë–Ω–Ω—ã–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏) –∏ `forecasted_signs` (–∞–Ω—Å–∞–º–±–ª—å –º–∞—Ä–∫–æ–≤—Å–∫–∏—Ö –≥–æ–ª–æ—Å–æ–≤).
5. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –ø—Ä–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–∏ –∑–Ω–∞–∫–æ–≤.
6. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –ø—Ä–∏—Ä–∞—â–µ–Ω–∏—è –≤ –∫—É–º—É–ª—è—Ç–∏–≤–Ω—ã–µ `new_prices` –∏ –æ—Ç—Ä–∏—Å–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫.

## –î–µ—Ç–∞–ª–∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤

–§—É–Ω–∫—Ü–∏—è `plot_sequence` —Ä–∏—Å—É–µ—Ç —Å—Ç–∞—Ä—ã–µ —Ü–µ–Ω—ã (–±–µ–ª–∞—è –ª–∏–Ω–∏—è) –∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω—ã–µ (–∑–µ–ª—ë–Ω–∞—è/–∫—Ä–∞—Å–Ω–∞—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è). –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

* –û—Å–∏ –∏ –º–µ—Ç–∫–∏ —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω—ã –ø–æ–¥ —Ç—ë–º–Ω—ã–π —Ñ–æ–Ω.
* X-–º–µ—Ç–∫–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–µ (`%d.%m`) –∏ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `today - (m - 1)`.
* –¶–≤–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω–æ–π –ª–∏–Ω–∏–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º `new_prices[-1]` –∏ `old_prices[-1]`.

–í–∞—Ä–∏–∞–Ω—Ç—ã —É–ª—É—á—à–µ–Ω–∏–π:

* –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–æ—Å—ã –¥–æ–≤–µ—Ä–∏—è, –≤—ã—á–∏—Å–ª–∏–≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø–æ –∞–Ω—Å–∞–º–±–ª—é —Ä–µ–≥—Ä–µ—Å—Å–∏–π.
* –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø—Ä–∏—Ä–∞—â–µ–Ω–∏—è —Å—Ç–æ–ª–±—Ü–∞–º–∏ –Ω–∞ –≤—Ç–æ—Ä–∏—á–Ω–æ–π –æ—Å–∏ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏.
* –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä–∫–µ—Ä—ã –¥–ª—è –Ω–∞–±–ª—é–¥–∞–µ–º—ã—Ö –∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω—ã—Ö —Ç–æ—á–µ–∫.

## –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å –ø–∞—Ä—Å–µ—Ä–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

`fetch_sequences_all_pairs` —Å—Ç—Ä–æ–∏—Ç —Å–ª–æ–≤–∞—Ä—å –¥–∞—Ç–∞ ISO ‚Üí –∫—É—Ä—Å—ã –ø–∞—Ä –¥–ª—è –æ–∫–Ω–∞ –≤ `days` –¥–Ω–µ–π –æ—Ç —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π –¥–∞—Ç—ã. –ü—Ä–æ—Ü–µ—Å—Å:

* –î–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–Ω—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `fetch_for_date`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–±—É–µ—Ç `base_latest` –∏–ª–∏ `base_archive/YYYY/MM/DD/daily_json.js`.
* –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –¥–µ–ª–∞–µ—Ç—Å—è –æ–¥–Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –∏ –≤ –∫–æ–Ω—Ü–µ –ø—ã—Ç–∞–µ—Ç—Å—è `base_latest` –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç.
* JSON-–∫—É—Ä—Å—ã –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ –º–∞—Ç—Ä–∏—Ü—É –ø–æ–ø–∞—Ä–Ω—ã—Ö —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–π `target_per_base`.

–ü—Ä–æ–±–ª–µ–º—ã –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:

* –õ–∏–º–∏—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤: —Å—Ç—Ä–∞—Ç–µ–≥–∏—è `Retry` –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞. –î–ª—è –±–æ–ª—å—à–∏—Ö –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –æ–∫–æ–Ω —É—á–∏—Ç—ã–≤–∞–π—Ç–µ –ª–∏–º–∏—Ç—ã API.
* –ß–∞—Å—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç `last_known` –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –¥–Ω–µ–π ‚Äî —ç—Ç–æ –∑–∞–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–æ–±–µ–ª—ã, –Ω–æ –º–æ–∂–µ—Ç —Å–∫—Ä—ã–≤–∞—Ç—å —Ä–∞–∑—Ä—ã–≤—ã. –ü—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É, —á—Ç–æ–±—ã –±—Ä–æ—Å–∞—Ç—å –æ—à–∏–±–∫—É –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö.
* –†–∞–∑–ª–∏—á–∏—è –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–æ–Ω–∞—Ö: API –æ—Ç–¥–∞—ë—Ç –¥–Ω–µ–≤–Ω—ã–µ –∫—É—Ä—Å—ã –ø–æ –º–æ—Å–∫–æ–≤—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏.

## –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ)

–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–≥–æ–≤–æ—Ä–∫–∏:

* **–≠–∫—Å–ø—Ä–µ—Å—Å–∏–≤–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–µ–π:** –º–∞—Ä–∫–æ–≤—Å–∫–∏–µ —Ü–µ–ø–∏ –ø–æ –∑–Ω–∞–∫–∞–º –∏ –ª–∏–Ω–µ–π–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è –ø–æ –ø—Ä–∏—Ä–∞—â–µ–Ω–∏—è–º —Å–ø–æ—Å–æ–±–Ω—ã –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å—Ç—ã–µ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
* **–ß–∏—Å–ª–æ–≤–∞—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å:** –ø—Ä—è–º–∞—è –∏–Ω–≤–µ—Ä—Å–∏—è `X^T X` –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—É—Å—Ç–æ–π—á–∏–≤–æ–π ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `pinv` –∏–ª–∏ —Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏—é.
* **–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –≤—ã–≤–æ–¥–æ–≤:** –∞–Ω—Å–∞–º–±–ª—å —ç–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∏ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.
* **–°–µ–º–ø–ª–∏—Ä–æ–≤–∞–Ω–∏–µ vs argmax:** —Å–µ–º–ø–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—ë—Ç –Ω–µ–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≥–Ω–æ–∑—ã; `argmax` ‚Äî –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ.

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT ‚Äî —Å–º. `LICENSE`.

---